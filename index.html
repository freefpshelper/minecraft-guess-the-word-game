<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Minecraft Imposter Picker</title>
  <style>
    * { box-sizing: border-box; }

    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      color: #f0f0f0;
      height: 100vh;
      overflow: hidden;
    }

    video#bgVideo {
      position: fixed;
      right: 0;
      bottom: 0;
      min-width: 100%;
      min-height: 100%;
      object-fit: cover;
      z-index: -1;
    }

    #muteBtn {
      position: fixed;
      top: 15px;
      right: 15px;
      background: rgba(0,0,0,0.6);
      color: white;
      border: none;
      padding: 10px 16px;
      font-size: 16px;
      border-radius: 10px;
      cursor: pointer;
      z-index: 10;
      transition: background 0.3s;
    }
    #muteBtn:hover {
      background: rgba(0,0,0,0.8);
    }

    .container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      text-align: center;
      background: rgba(0, 0, 0, 0.55);
      padding: 20px;
    }

    h1 {
      color: #ffd700;
      text-shadow: 2px 2px 8px #000;
      margin-bottom: 20px;
    }

    p {
      font-size: 18px;
      max-width: 800px;
    }

    button {
      background: #2196f3;
      color: white;
      padding: 12px 24px;
      border: none;
      border-radius: 12px;
      cursor: pointer;
      font-size: 18px;
      margin-top: 20px;
      transition: transform 0.2s, background 0.3s;
    }
    button:hover {
      transform: scale(1.05);
      background: #1976d2;
    }

    input, select {
      padding: 10px;
      font-size: 18px;
      border-radius: 8px;
      border: none;
      text-align: center;
      margin-top: 10px;
    }

    .result {
      font-size: 32px;
      margin: 30px 0;
      text-align: center;
      animation: fadeIn 0.6s ease-in-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .playerScreen {
      font-size: 40px;
      font-weight: bold;
      margin: 40px 0;
      animation: pulse 1s infinite alternate;
    }

    @keyframes pulse {
      from { transform: scale(1); opacity: 0.7; }
      to { transform: scale(1.1); opacity: 1; }
    }
  </style>
</head>
<body>
  <video autoplay loop id="bgVideo"></video>
  <button id="muteBtn">ðŸ”‡ Mute</button>

  <div class="container" id="gameContainer"></div>

  <script>
    // --- Background Video Randomizer ---
    const videos = [
      "minecraft-aquarium.1920x1080.mp4",
      "cherry-blossom.1920x1080.mp4",
      "minecraft-sunset.3840x2160.mp4",
      "nature-in-minecraft.1920x1080.mp4",
      "minecraft-rainy-landscape.1920x1080.mp4"
    ];
    const bgVideo = document.getElementById("bgVideo");
    bgVideo.src = videos[Math.floor(Math.random() * videos.length)];
    bgVideo.muted = true;

    const muteBtn = document.getElementById("muteBtn");
    muteBtn.addEventListener("click", () => {
      bgVideo.muted = !bgVideo.muted;
      muteBtn.textContent = bgVideo.muted ? "ðŸ”‡ Mute" : "ðŸ”Š Unmute";
    });

    // --- Game Variables ---
    let players = [];
    let block;
    let imposters = [];
    let currentIndex = 0;
    let showingPlayer = true;
    let playerCount = 0;
    let imposterCount = 0;

    // BIG deduped block list â€” equal probability
    const blocks = [
      "Stone","Wooden Planks","Brick","Concrete","Wool","Sandstone","Glass","Terracotta","Bookshelf",
      "Slab","Stairs","Chiseled Stone Bricks","Quartz","Nether Brick","Coal Ore","Iron Ore","Gold Ore","Diamond Ore",
      "Emerald Ore","block of lapis lazuli","Redstone Ore","Nether Quartz Ore","Nether Gold Ore","Ancient Debris","Furnace",
      "Blast Furnace","Smoker","Crafting Table","Anvil","Chest","Barrel","Dispenser","Dropper","Hopper","Cauldron",
      "Loom","Stonecutter","Grindstone","Composter","Brewing Stand","Beacon","Ender Chest","Enchantment Table",
      "Lectern","Torch","Lantern","Glowstone","Sea Lantern","Redstone Lamp",
      "Campfire","Soul Campfire","End Rod","Candle","Grass Block","Dirt","Sand","Gravel","Leaves",
      "Flowers","Mushrooms","Vines","Cactus","Sugar Cane","Melon","Pumpkin","Snow","Ice",
      "Packed Ice","Blue Ice","Clay","Water","Lava","End Portal Frame","Command Block","Barrier Block",
      "Jukebox","Conduit","Observer","Shulker Box","Dragon Egg","TNT","Bed",
      "Concrete Powder","Stained Glass","Block of Coal","Block of Iron",
      "Block of Gold","Block of Diamond","Block of Emerald","Block of Redstone","Block of Quartz",
      "Block of Netherite","Netherrack","Soul Sand","Soul Soil","Blackstone"
      ,"Warped Planks","Crimson Planks","Warped Slab","Crimson Slab","Warped Stairs","Crimson Stairs",
      "Magma Block","End Stone","Chorus fruit","Chorus Flower","Redstone Dust",
      "Redstone Block","Redstone Torch","Piston","Sticky Piston","Lever","Button","Wooden Pressure Plate",
      "Stone Pressure Plate","Iron Pressure Plate","Golden Pressure Plate","Wooden Trapdoor","Iron Trapdoor","Trapdoor",
      "Daylight Detector","Enchanting Table","End Portal","Spawner","Stone Button","Wooden Button","Block of Raw Iron",
      "Block of Raw Gold","Block of Raw Copper","Copper Block","Oxidized Copper","Exposed Copper","Weathered Copper",
      "Cut Copper","Waxed Copper Block","Waxed Exposed Copper","Waxed Weathered Copper","Waxed Cut Copper",
      "Copper Slab","Copper Stairs","Lightning Rod","Amethyst Block","Block of Amethyst","Tuff","Deepslate",
      "Deepslate Ores","Pointed Dripstone","Rooted Dirt","Hanging Roots",
      "Moss Block","Mangrove Roots","Mud","Packed Mud","Mud Bricks",
      "Mud Brick Slab","Mud Brick Stairs","Mangrove Planks","Mangrove Slab","Mangrove Stairs","Mangrove Boat","Bamboo",
      "Bamboo Sapling","Bamboo Block","Bamboo Slab","Bamboo Stairs","Suspicious Sand","Suspicious Gravel","Cherry Wood",
      "Cherry Planks","Cherry Slab","Cherry Stairs","Cherry Button","Cherry Pressure Plate","Cherry Trapdoor","Cherry Boat",
      "Jungle Planks","Mossy Cobblestone","Mossy Stone Bricks","Stone Brick Slab","Stone Brick Stairs",
      "Brick Slab","Brick Stairs","Crying Obsidian","Obsidian","Warped Wart Block","Crimson Wart Block","Bone Block",
      "Soul Lantern","Soul Torch","Diamond Block","Stonecutter Block",
      "Netherite Block","End Stone Brick","Glowing Item Frame","Ladder","Rail","Powered Rail","Detector Rail",
      "Moss","Carved Pumpkin","Melon Slice","Honey Block","Slime Block","Bedrock",
      "Lava","Soul Sandstone","Reinforced Deepslate","Honeycomb Block","Sculk Block",
      "Sculk Catalyst","Sculk Vein","Sculk Shriekers","Sculk Sensor","Lush Cave Plant","Amethyst Cluster",
      "Deepslate Diamond Ore","Deepslate Gold Ore","Mangrove Wood","Chorus Fruit Block","Dried Kelp Block",
      "Wooden Slab","Stone Slab","Andesite Slab","Diorite Slab","Granite Slab","Cobblestone Slab","Terracotta Slab",
      "Sandstone Slab","Jungle Slab","Acacia Slab","Birch Slab","Dark Oak Slab","Emerald Block","Sandstone Block",
      "Prismarine","Prismarine Bricks","Cracked Stone Brick","Cracked Brick","Cracked Clay Block",
      "Polished Andesite","Polished Diorite","Polished Granite"
    ];

    const container = document.getElementById("gameContainer");

    // --- Screens ---
    function showSetup() {
      container.innerHTML = `
        <h1>Game Setup</h1>
        <p>Pick number of players (3â€“15):</p>
        <input type="number" id="playerCount" min="3" max="15" value="4">
        <p>Pick number of imposters:</p>
        <select id="imposterCount"></select>
        <br>
        <button onclick="randomizeImposters()">ðŸŽ² Random</button>
        <br>
        <button onclick="startGame()">Start Game</button>
      `;

      const playerInput = document.getElementById("playerCount");
      const imposterSelect = document.getElementById("imposterCount");

      function updateImposterOptions() {
        playerCount = parseInt(playerInput.value);
        let maxImp = Math.min(playerCount - 1, 10);

        if (playerCount >= 8 && playerCount <= 9) maxImp = Math.min(4, playerCount - 1);
        if (playerCount >= 10 && playerCount <= 12) maxImp = Math.min(5, playerCount - 1);
        if (playerCount >= 13) maxImp = Math.min(8, playerCount - 1);

        imposterSelect.innerHTML = "";
        for (let i = 0; i <= maxImp; i++) {
          const opt = document.createElement("option");
          opt.value = i;
          opt.textContent = i;
          imposterSelect.appendChild(opt);
        }
      }
      playerInput.addEventListener("input", updateImposterOptions);
      updateImposterOptions();
    }

    // --- Random Imposter Selector (Weighted) ---
    function randomizeImposters() {
      const playerInput = document.getElementById("playerCount");
      playerCount = parseInt(playerInput.value);

      // Cap imposters at 8 max
      let maxImp = Math.min(playerCount - 1, 8);

      // Weighted probability â€“ fewer imposters more likely
      const weights = [];
      for (let i = 1; i <= maxImp; i++) {
        let weight = 1 / (1 + Math.pow(i - 1, 2)); 
        if (i > Math.floor(playerCount / 2)) {
          weight *= 0.25; // punish larger numbers heavily
        }
        weights.push(weight);
      }

      // Normalize + pick
      const totalWeight = weights.reduce((a, b) => a + b, 0);
      let r = Math.random() * totalWeight;
      let chosen = 1;
      for (let i = 0; i < weights.length; i++) {
        r -= weights[i];
        if (r <= 0) {
          chosen = i + 1;
          break;
        }
      }

      imposterCount = chosen;
      startGame(); // ðŸš€ Jump straight into game
    }

    // --- Game Flow ---
    function startGame() {
      if (!imposterCount) {
        imposterCount = parseInt(document.getElementById("imposterCount").value);
      }
      playerCount = parseInt(document.getElementById("playerCount").value);

      players = Array.from({length: playerCount}, (_, i) => i + 1);
      block = blocks[Math.floor(Math.random() * blocks.length)];
      imposters = [];

      while (imposters.length < imposterCount) {
        let pick = players[Math.floor(Math.random() * players.length)];
        if (!imposters.includes(pick)) imposters.push(pick);
      }

      currentIndex = 0;
      showingPlayer = true;
      showNext();
    }

    function showNext() {
      if (currentIndex < players.length) {
        if (showingPlayer) {
          container.innerHTML = `
            <div class="playerScreen">Player ${players[currentIndex]}</div>
            <button onclick="showNext()">Next</button>
          `;
          showingPlayer = false;
        } else {
          let player = players[currentIndex];
          let text = imposters.includes(player)
            ? `${player} â†’ Imposter`
            : `${player} â†’ ${block}`;
          container.innerHTML = `
            <div class="result">${text}</div>
            <button onclick="showNext()">Next Player â†’</button>
          `;
          currentIndex++;
          showingPlayer = true;
        }
      } else {
        container.innerHTML = `
          <h1>Round Over</h1>
          <button onclick="restart()">Restart</button>
        `;
      }
    }

    function restart() {
      showSetup();
      bgVideo.src = videos[Math.floor(Math.random() * videos.length)];
    }

    // Start setup directly
    showSetup();
  </script>
</body>
</html>
